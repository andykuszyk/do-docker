services:
- docker
sudo: required
jobs:
  include:
  - stage: test
    script: sudo make test
  - stage: deploy
    script: make deploy
before_install:
- openssl aes-256-cbc -K $encrypted_e8a559067d36_key -iv $encrypted_e8a559067d36_iv
  -in id_rsa.enc -out id_rsa -d
- chmod 700 id_rsa
- make install-yq
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
env:
  global:
  - secure: A9L8lrfXQ6sapVrhG2gyihZ4+7VhXflzLRa++1QcbB0AU2sTkUFfIinipGuad9ishFXrjRLzQLYip/P1UPpZTC8bjJPSOPzxjgm5Y0VGpRPAp6GPFEOVEpVvi9bAWOrSTE4Xro9UcTrgUkIqu6KFnuug+aLs0KNuclRn0gunXsoc0DW+j2HsDQich4rc4VVN7QV4OilyMLuPhk3O3KPcgyZVbd3lYktoq+cpNs8LrrNXzqB8QxOclI/0aQ99QiCCglhSiZpUeO76dKcOUrMthaFq3lqxOPaYuiQnr/rvrtFQfNNWJ+wnm+1+JMuN6RsDGgoea73HXLXybDiIGudGoltMyXtrnHvps1BhGMtP+xqC2OhMuvbbguisJtK4wAx0A8wOasA2jLo3FmJzmmnA7w8AIDj3WXnRxSMFs/7Nz35qUzeibDEqAlDrRrg6ayI1nfjW+jEiLixYtzhCiPOMMoJ+20LwHIeIgH37kkcLiCL7zGKe2J3iFoKBBGenmPc97YTXtAD31UxWTnPO78bjzypy0v1Win5rvX6kIwuzrlwrmBdJpQP9io5UQzTMQdi60uG34a7i8HhW2fcqEkLcjqMNwtesdzgEPDD/2lX7MrmI+G0wYV1VzajvRYQ9Ykiyc4ZVSu8AxyXxfhT/Bid4tYnciHJHH2k+xWDO0BX2FAc=
  - secure: eBRAyuV18/9EYRBhE6nK0qGSJrkKqQ/nZwWLbumhd1WHBEElysq8xUADrpzcBBYDJ6CmGET/whgG7kZk3O5DmeJyTxkS6ISgifnircYY9G4OmcCq7ktj0ZSN5sFDNk0MEm0DbhY9+WA8Cq4Z2qCzo7B4GfTXByIVy+PnXgFu/NaBLDVrL8W7vES9PYziaJC2C2umrEcbfG4FYgppW1w3HfGgw7PHA05ApjNw/IjtZltrsa/7gdP30uUjB8v4Lo5bRDTkZ3CVbVm1X10SnEoq10OwVoDBk5DKvKYv0GxQb7MKQogBdySpcdLkGQ/zsHkMYz4PdCFLBPoIB/O0FhbFvsWnG/0WzKGyhx1PdiJ2IkNQ9wJbudwfdwya43BALnXO/Php5sNHtYaF4onW9QoR1Wq5/0av9odQMOqR8LWDiFIX7bFBh9EdL1RzWekXsseJXoPhGEyZOP/BsEqhVVGQ4pkO4BrfpaVbnQZvdzAmu196UNm6Yr4/9LKK4nFigIpEk8qjwxSffdMR9X+PLpkctsXZfT/KVIczUah4TD5tXy5uhusu/xrtPvi2RRnxp4aNWslRWZ0VhGx1ntRP5bablCxvbGk78qn//ow3R/L0NjxFCAmmTwbqnRXI8qow21B8HljGEQ7rr2KkqHYLE1IQo5XdbqpxcmZxpq9Rl8Uq208=
  - secure: SQ/Ozu+S+OYhkzZCdZxmdRPRJLyLXIy6hy5/K+TYgPYQf26IceWPeL6ubr8q/92utYX4eGCbLMLpgcbqKBKlbGd3tmzcUouLANb8/AswYLOkcbwBybjVAz0axYt5UuTVd7IGEuW+CCzSyvbCS3+Xw7SNhGVY9faFIg584wZaGTyC2gDL60UPM4+Z0FmfXQJteb+nQj0oT8lztWb0kePVuAaeskhIi0KsxAZNvfte4mF3gn/r96p6PcfgtvrOnCEe7wQJmKTDC2nbbFLhRIzTm6w/Hvtbgc52RG4RXBHb0XRuPx/GdFxgOI/A2bxKSyI3byCkzSuRcgN5SUdxAxWKgW8JK9jb+llSrtEsTzbt7s/i4QXrgyzy+QREiiKRNqtDav1Y93vQTheEG51gR+w0aO4wV4dEqLG7aJlmy0qODjdwZkKExNULQO6qahbT/qwB6Xl2I04x/PC1IXGfXgqtku7h0yMvHKqbkiYbTilq44pEg/7Dd+DEVrp8HfBN0jRxJqKWxn18TnR3DlaEVNDd1MECge4+95W260P6rRuDAxfRwW9JwL5EYQYSznsHo+EenLLCPw4jxMaVjq2PE1O+28cS4JRBKwLITUoEm2WjQcNDg87TtBB1AFBrDvDKRPNjKZhC4e0JRgjIBEOjWMXRb4H2RTwiRsR4JBajtYv1nYs=
  - secure: MwOwn3YL4kviqMiAsaF8lAbgHJrbLMLbhMRA+28BANKAta/yjfbI9Nzx/mcWzMq3bRvnEmuf1bPXtVagsxVhBt98CuqY2AbABv+KsBfD7S5SDZSqQuTZ007Q5JFfzOvyRFcWEIDg7cZYloPMCxQ9NPyNIdA0A7GLOao6QaJ3JAg93TyW8RlTaK8LGAwWviw1IEQXV3Y14pEUztgg6TTeX6kZ4aO32LqKTgF6KAwxJv463Esjacmz9Q40ICBU1xJPNwyTkZ0g2bX7ucNRFhmvdowCIEuDG/illpjg5csiy2TvGCgiKmlp529vDg2KVij5Dw9FlC5E/teyUoklXRq/UHT+4wfTZ47typ6K6k+buoFj2bfVllSuzBbi9WnSqnQsLG9SJZhzGxIeDjF9ajpAjVghxAc7z9RFuwjS4XpUEJ9eBpKSl2Fz1FGVVk0gLQ0Ct992KXhVb0dmUieLdVAdyvjjzqlxDZO6IzW2QRZrnA2BxZWJx9lmUhlSabPRuhm6sSHSNMOc0f8prjmy+G9SwnlxRNX/Ym7VbAkAgaSxieXNHDqS7R0iba6doId6FpHELJ/V17yD9QNB2om3QM+PYBuLEkBuMbOMUT4+zUZi32PdH1xtN54kcLzwMWu/Gu7dAL5yYItr9EavBkU51KZMq/XBspGp7PpVje/8LtwzWMY=
  - secure: RejbLtRnk7gWhdJpWWyBAxhk1t5G1hu1I8O/2mdfOuXItWydGz3fL6QxLp1cdvJSEAmOoHG72LCr06Lg3/gO1XCyspbyr9WTHuDgXa9E6R4JobIKITEw14aNn1IHuWI5R21mHT0c4rq/vU9nDDlw9CdmVigSjfThTGkRgHuyu7BZ2c6e4CBzFn0kvNodCeAcSlI2z6GFkgU/5o+FQBe1zV3jwXcVlSgNz8KUEfWhNWNY92VPppwKj5dwEIeC73tJuODfxNAMb2s7xMXyB+Uu3vz2QyZNcVcDEN636EJYyJ5wronmgVXHD3SUm8QPOK1Yv2wc/qExnZSe8FAUwDdhzFJpOSuz0lmeuhww+DHLSzvbniNNZLbu9VpmHO4ax8oBujYCdxb/ZAMS2ZSzSVZG+zdhzYl6BJQN1ZJelNQRu+3j0kul15E+pv+UTnan2rE8kEuIrYTX/jHzhmysll5CODyiNxwoZmZ+gJVcBXEBWMwnewKUI4k9Sw29ShYDlChO/ymQN8/osc+bUzwF8J8OGzrz1AB8YSPSE52L+lSwarJP/gYeSNcqLSj92ZVDiCyOvMxoxNmYTVZ2upPQJw5YQrsxq5wdvfHlx8ZaZgP7uvUAqE0XWUhXdeTwtf/ZrAGHxlBy2O+aeYbXwJAJDOL8aC7kF+0ELJJNHt7tzz4qJF0=
  - secure: Q6SBIyaB5EpqJp4s1d4PcVWgu4wkUJbwixMJWNsXzcPNa3im2/h2KNdLFIwFr1LvuBorn5poHEGf5iRKLuPftt9r66yTv6mCBXMCACF1HSBJlv10PGZO1kKdnQ8Bjq8pW539SlLuOBzAeN7Z+1u4Txyh4qKNthWhbprglWkeZ0JsDSxhRsn0N11ZSBBTaMQcpTzD4iGqHlCPV1JgdeVdYZciS8kvXQk6P2TJ6hqWUBkg4g3lw0IKN12orIWuZN/JIZO5LkfopfV5HR2saQ1OUIK86k4wfvt6fnUqT5uoJHd2AaZhfXyaGYVAo+Q2Q0v8Y56hjcOdvwfb8A3PVyBQXDLRuA1Doh5rat8H7fw89yhzYNpjhbd/wo8aXgoSUyF9ipIizESnbIjNlsxo1g0BFaZbagL/mCO3zlvXMPap9hhH+sYH91b2X7SPBADFiPcJt0eu4gEUr9gqJTYzuKmB5fWBrawDm//8O9pQ+zsNVoNRiQ+oX+GQ5k9s3RZpa01kZjiAvgSCNUyzFJcj1LF/p/JDuWMPfM1NKwx6vj99L8zsDORVYfygnXpEHaOK9Ak4d1sBrY7jgyE7aB4DZCgM9esdZuddSQS/Ux7w6lApUhO9SLVGDpqWNkP0cMkRrEDNesPjSnMfcrGNzZDeRTeCsOmPf1Dn6KvMqluxAxnsI6s=
  - secure: BKP62Fz8ffYQ23WHBKT/N7MUXD/6oeMbqO9BpF2dWf/wePW+ZPKeIbc6D/6t9DdvlUv/bdy3cCr8Xf7L6ZWC99yMXknJhvo1KZTVGwNxMO6rxBBAd/HZ5nq4Vw5jlLnhhut+I+Ir9ghNyEg/Y6AMb1Dd0XDgy3iG/nUcegWoEmalVxP1KlYsxt5IRrmRPDsDU2KDPcQTGI11wIkW08Sz9setBxy+oyMjunlEzBq8GFysFA4J3CzPibbK3o3uZL9CdkbVlL1Ft3PKje6Z6I8GtonD2o7GFAQfuN8SlW2h9Bhx1cvclLkuUGPMkvhpJ9XYbiS7njh4GD9c/5n4UISq92orQIf2vHs2JyPuusNxnGi647w5lMkf4BlYx8Y0RoZDArN3dRZaF/X60HCrlrsxuN7e+yGFPJdFwdWFUeVC11cGhm+2Av/klcF9WYPE8Coa5qc0Fmj3e2I6bIQB4ydCtrk+ajthpl+OvT+SQAj9vFgbRQ9QPF8bY9PvLIdp8BaCswP5uc2ZGV1wtQTH6FNg3w/UIUdssVvr/OK6QltwmXHCG/vZvq8kQr2p0yAM/LUGbrF8TFohkX2C2TOuQ4DjRIDYawqL1Aka32RdHbLeyE2ZS7NV0cD4mYO8W+1mK2lFWC5IhI0wkhHNSxecbk6leb0aORDuf2iACerr8GiYPsQ=
notifications:
  slack:
    rooms:
      secure: HT+WAjcJcW8GRs7wZwlulIZOBB+QlsyOtKnrxjiDdCANKbEJFZXHrBmMiQJn8LzXd7/XsmQVVagyHG9A7ACYsipIs8HIzkGlI8ZiP/qxPQB1LJgDVR1GUwOhzwto26oi0Xb5yFrmwapOxGy73k6v8C4bPFO6QMDfh4YpGeHqbGv/k2FbkOd8Gnr3J1/lDiLU3VZ2EUvsCQi0M1Acu6rx5D6e9wwVN6NwWC/6ksx/3Sx2dzM/4BX5pi4QvKQY0NQn4POWgkEuo3t+r4zrnntUe5Ym23HpordL+j0MAQeg5RDgBt1PAbxmKbH+euHcbdGCyOTlOWcrK0Q3Ve64DI8GV1E4N1b30Sk56IJ/b3Wp1Zvbh5rKWLC9MO4uUzonSTTlIZ6fAu+HukOYB0ezHw2XGQBfnGefCbOUAJRxl7f9iJybWj2+Yx82CQ9yKm674Y/nTw0G73YM8Z0WPgbT5RVY4Gfr5hEFqA4kei4VUXGjiKO9jR5H8SvmTaTXeVX8DR5ymuwx0WY66M/Wu149hG+aBbGlZYEffTw6Jks/zl2FiSZcZA5IQHDL2earN0lrFp78A7ljH4By6ljoFTDfqQ5snz0hA9M8UTBdODq30o25tVjsl+S+XY9RrRrb4Gu1wDHsq1vgCI2Cd+4K+cgp1ZPYgh6ezyq+6icbyJrhPQfYDZ8=
